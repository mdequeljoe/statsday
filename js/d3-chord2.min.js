!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-path"],t):t(n.d3=n.d3||{},n.d3,n.d3)}(this,function(n,t,r){"use strict";function e(n){return function(t,r){return n(t.source.value+t.target.value,r.source.value+r.target.value)}}function u(){function n(n){var e,f,c,h,s,p,g,d,y=n.length,v=2*Math.PI,x=[],A=t.range(y),m=[],M=[],b=[],T=[],j=T.groups=new Array(y),P=new Array(y*y),_=0,w=0,O=[];if(u){var q=u.length,E=t.range(q);for(m=[].concat.apply([],u),c=0;c<A.length;c++)-1==m.indexOf(A[c])&&(m.push(A[c]),u.push(A[c]))}for(p=0,c=-1;++c<y;){for(e=0,h=-1;++h<y;)e+=n[c][h];x.push(e),b.push(t.range(y)),p+=e}if(o&&(g=p,p=o>g?o:p),p=u?Math.max(0,v-r*(y-q))/p:Math.max(0,v-r*y)/p,d=p?r:v/y,o&&(d=(v-r-g*p)/q),u){for(c=0;c<u.length;c++){for(s=u[c].length?u[c].length:1,h=0;h<s;h++)_+=x[w],w++,c<1||h>0?O.push(0):O.push(d);M.push(_),_=0}O.shift(),O.push(0),A=m}if(l){E.sort(function(n,t){return l(M[n],M[t])});var G=[];for(E.forEach(function(n){G.push(u[n])}),A=[].concat.apply([],G),c=0;c<y;c++)-1==A.indexOf(m[c])&&A.push(m[c])}for(a&&b.forEach(function(t,r){t.sort(function(t,e){return a(n[r][t],n[r][e])})}),e=0,c=-1;++c<y;){for(f=e,h=-1;++h<y;){var I=A[c],R=b[I][h],S=n[I][R],C=e,k=e+=S*p;P[R*y+I]={index:I,subindex:R,startAngle:C,endAngle:k,value:S}}j[I]={index:I,startAngle:f,endAngle:e,value:x[I]},e+=u?O[c]:d}for(c=-1;++c<y;)for(h=c-1;++h<y;){var z=P[h*y+c],B=P[c*y+h];(z.value||B.value)&&T.push(z.value<B.value?{source:B,target:z}:{source:z,target:B})}return i?T.sort(i):T}var r=0,u=null,o=null,l=null,a=null,i=null;return n.padAngle=function(t){return arguments.length?(r=Math.max(0,t),n):r},n.arcGroups=function(t){return arguments.length?(u=t,n):u},n.chordSum=function(t){return arguments.length?(o=t,n):o},n.sortArcGroups=function(t){return arguments.length?(l=t,n):l},n.sortSubgroups=function(t){return arguments.length?(a=t,n):a},n.sortChords=function(t){return arguments.length?(null==t?i=null:(i=e(t))._=t,n):i&&i._},n}function o(n){return n.target}function l(n){return n.radius}function a(n){return n.startAngle}function i(n){return n.endAngle}function f(n){return function(){return n}}function c(){function n(){var n,o=t.call(arguments),l=h?h.apply(this,o):0,a=s.apply(this,o),i=+p.apply(this,(o[0]=l,o)),f=y.apply(this,o)-e,A=v.apply(this,o)-e,m=(f+A)/2,M=g?+g.apply(this,(o[0]=l,o)):i-20,b=i*u(f),T=i*c(f),j=M*u(m),P=M*c(m),_=+p.apply(this,(o[0]=a,o)),w=y.apply(this,o)-e,O=v.apply(this,o)-e,q=(w+O)/2,E=d?+d.apply(this,(o[0]=a,o)):_+20,G=_*u(w),I=_*c(w),R=E*u(q),S=E*c(q);if(x||(x=n=r.path()),"object"==typeof a&&(x.moveTo(G,I),x.arc(0,0,_,w,O),x.lineTo(R,S),x.lineTo(G,I)),"object"==typeof l&&(x.moveTo(b,T),x.arc(0,0,i,f,A),x.lineTo(j,P),x.lineTo(b,T)),x.closePath(),n)return x=null,n+""||null}var t=Array.prototype.slice,e=Math.PI/2,u=Math.cos,c=Math.sin,h=null,s=o,p=l,g=null,d=null,y=a,v=i,x=null;return n.radius=function(t){return arguments.length?(p="function"==typeof t?t:f(+t),n):p},n.sourceRadius=function(t){return arguments.length?(g="function"==typeof t?t:f(+t),n):g},n.targetRadius=function(t){return arguments.length?(d="function"==typeof t?t:f(+t),n):d},n.source=function(t){return arguments.length?(h=t,n):h},n.target=function(t){return arguments.length?(s=t,n):s},n.context=function(t){return arguments.length?(x=null==t?null:t,n):x},n}n.chord2=u,n.chordArrow=c,Object.defineProperty(n,"__esModule",{value:!0})});
